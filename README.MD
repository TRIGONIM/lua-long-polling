# Long Polling Server

A simple [long-polling](https://javascript.info/long-polling) server (and client) written in Lua.

![demo image](https://file.def.pm/wq86G74W.svg)

_source: javascript.info_

## Use cases:

- In environments where it is not possible to create a web server (e.g. in a Garry's Mod game), but getting "webhooks" is necessary
- As a single point of collecting webhooks, for example to get updates from all your Telegram bots with just one request. To do this, make `https://api.telegram.org/bot$TOKEN/setWebhook?url=https://your.app/SomeS3cretP@th?this_key=and_value&will_be=merged_with_updates_sent_by_telegram&botname=some_id`.
- Simple chat-like services implementations

## Project structure

```
â”‚ .
â”œâ”€â”€ examples
â”‚   â”œâ”€â”€ advanced
â”‚   â”‚   â”œâ”€â”€ client.lua
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â”œâ”€â”€ README.MD
â”‚   â”‚   â””â”€â”€ server.lua
â”‚   â””â”€â”€ simple
â”‚       â”œâ”€â”€ README.MD
â”‚       â””â”€â”€ server.lua
â”œâ”€â”€ lua
â”‚   â””â”€â”€ long-polling
â”‚       â”œâ”€â”€ dataproviders
â”‚       â”‚   â”œâ”€â”€ localtable.lua
â”‚       â”‚   â””â”€â”€ redis.lua
â”‚       â”œâ”€â”€ misc
â”‚       â”‚   â”œâ”€â”€ pubsub.lua
â”‚       â”‚   â””â”€â”€ redis-safe.lua
â”‚       â””â”€â”€ init.lua
â”œâ”€â”€ LICENSE
â””â”€â”€ README.MD

```

## Documentation:

Not ready yet. I am lazy. **But if you create an issue** so I can see that someone needs it, I will create code documentation instantly âš¡.

But you can look at the examples below to understand what is what. Also, in the examples there are README files with a lot of useful information.

## Application examples:

- ðŸ”¥ [advanced](/examples/advanced). Source code of real-working application
- [simple](/examples/simple). Simple to understand example of using the library

## TODO:

- Move out `redis-safe` into separate repo
- Split the library and application examples into separate repos. Need for the ability to do `require("kupol.server")` and `require("kupol.client")`
- Create the `mysql` dataprovider, using [luasocket-mysql](https://github.com/TRIGONIM/luasocket-mysql) driver
- Also create the `filesystem` dataprovider

